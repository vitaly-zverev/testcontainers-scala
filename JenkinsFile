pipeline {
    //agent{ node 'coreos' }   // like 'master', 'linux' etc.
    //agent{ node 'coreos_ubuntu_podman' }   // like 'master', 'linux' etc.
    agent{ node 'docker' }   // like 'master', 'linux' etc.

    stages {

            stage ("docker test") {
                steps {
                    sh ('docker info')
                    sh ('docker-compose version')
                }
            }

            stage ("sbt quick test") {
                steps {
                    sh ('ls -la')
                    sh ('java -version')
                    sh (' sbt "testOnly com.dimafeng.testcontainers.integration.GenericContainerDockerFileSpec" ')
                }
            }


            stage ("sbt Postgresql test") {
                steps {
                    sh (' sbt "testOnly *PostgresqlSpec" ')
                }
            }

    }
}